var assert=require("assert");var utils=require("../test/test-utils").test_uils;var core=require("../src/ran").core;var TRIALS=1;var LAPS=1e3;function add(r,a){if(!r.hasOwnProperty(a))r[a]=1;else r[a]++}describe("ran",function(){describe("core",function(){describe("float",function(){it("should return an array of floats uniformly distributed in (min, max)",function(){utils.trials(function(){var r=Math.random()*200-100;var a=Math.random()*200-100;var t=Math.floor(Math.random()*40-20);var n=[];for(var e=0;e<LAPS;e++){var o=core.float(r,a,t);if(t<2)o=[o];o.forEach(function(t){n.push(t);assert.equal(true,(r<a?r:a)<=t&&t<=(r<a?a:r))});assert.equal(t<2?1:t,o.length)}if(r<a){return utils.ks_test(n,function(t){return(t-r)/(a-r)})}else{return utils.ks_test(n,function(t){return(t-a)/(r-a)})}})})});describe("int",function(){it("should return an array of integers uniformly distributed in (min, max)",function(){utils.trials(function(){var r=Math.floor(Math.random()*200-100);var a=Math.floor(Math.random()*200-100);var t=Math.floor(Math.random()*40-20);var n=[];for(var e=0;e<LAPS;e++){var o=core.int(r,a,t);if(t<2)o=[o];for(var i=0;i<o.length;i++){n.push(o[i]);assert.equal(true,(r<a?r:a)<=o[i]&&o[i]<=(r<a?a:r))}assert.equal(t<2?1:t,o.length)}return utils.chi_test(n,function(){return 1/Math.abs(a-r+1)},1)})});it("should return an integer uniformly distributed in (min, max)",function(){utils.trials(function(){var r=Math.floor(Math.random()*200-100);var a=Math.floor(Math.random()*200-100);var t=[];for(var n=0;n<LAPS;n++){var e=core.int(r,a);t.push(e);assert.equal(true,(r<a?r:a)<=e&&e<=(r<a?a:r));assert.equal(e,parseInt(e,10))}return utils.chi_test(t,function(){return 1/Math.abs(a-r+1)},1)})})});describe("choice",function(){it("should return some random elements of an array",function(){for(var r=0;r<TRIALS;r++){var a=["a","b","c"];var t={};var n=Math.floor(Math.random()*200-100);for(var e=0;e<LAPS;e++){var o=core.choice(a,n);if(n<2)o=[o];o.forEach(function(r){add(t,r);assert.equal(a.indexOf(r)>-1,true)});assert.equal(n<2?1:n,o.length)}for(var i in a){if(a.hasOwnProperty(i)){assert.equal(true,t[a[i]]>0)}}for(i in t){assert.equal(a.indexOf(i)>-1,true)}}})});describe("char",function(){it("should return some random characters of a string",function(){for(var r=0;r<TRIALS;r++){var a="abcdefghijkl51313#^!#?><;!-_=+.,/:{}()";var t=Math.floor(Math.random()*200-100);for(var n=0;n<LAPS;n++){var e=core.char(a,t);if(t<2)e=[e];e.forEach(function(r){assert.equal(true,a.indexOf(r)>-1)});assert.equal(t<2?1:t,e.length)}}})});describe("shuffle",function(){it("should shuffle an array",function(){for(var r=0;r<TRIALS;r++){var a=[];var t=[];for(var n=0;n<10;n++){a.push(n);t.push({})}for(var e=0;e<LAPS;e++){core.shuffle(a);a.forEach(function(r,a){add(t[r],a)})}t.forEach(function(r){for(n in r)if(r.hasOwnProperty(n)){assert.equal(true,r[n]>0)}})}})});describe("coin",function(){it("should return head with some probability",function(){utils.trials(function(){var r=Math.random();var a=Math.floor(Math.random()*200);var t=parseInt(Math.random()*20);var n=parseInt(Math.random()*20);var e=[];for(var o=0;o<LAPS;o++){var i=core.coin(t,n,r,a);if(a<2)i=[i];i.forEach(function(r){e.push(r)})}return utils.chi_test(e,function(a){return a===t?r:1-r},1)})})})})});