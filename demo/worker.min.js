function collect(n,e){Object.entries(n.reduce(function(n,e){var t=Math.floor(e[0]);if(!n.hasOwnProperty(t)){n[t]=1}else{n[t]++}return n},{})).forEach(function(n){if(!e.hasOwnProperty(n[0])){e[n[0]]=n[1]}else{e[n[0]]+=n[1]}})}function send(n,e){if(!this.diff){this.diff=[]}this.diff.push(e.map(function(e,t){return n[t]?Math.abs(e.y-n[t].y):0}).reduce(function(n,e){return n+e},0));postMessage({p:[{name:"real",values:n},{name:"estimate",values:e}],d:[{name:"diff",values:this.diff.map(function(n,e){return{x:Math.log(e+1),y:Math.log(n)}})}]})}self.addEventListener("message",function(n){"use strict";importScripts("../../ran.min.js");var e=.3;var t=function(n){return e*new ran.dist.Weibull(10,2).pdf(n)+(1-e)*new ran.dist.Normal(60,20).pdf(n)};var r=new ran.mc.Slice(function(n){return Math.log(t(n))},{min:[0]});r.burnIn();var a=100;var i=0;var f=0;var u={};var s=200;var c=function(){var n=r.sample(a);f+=n.length;i=Math.max(i,n.reduce(function(n,e){n=Math.max(n,e);return n},0));collect(n,u,f);send(new Array(Math.ceil(i+10)).fill(0).map(function(n,e){return{x:e-.5,y:t(e)}}),Object.entries(u).map(function(n){return{x:+n[0],y:n[1]/f}}));if(s>0){setTimeout(c,20);s--}};c()});